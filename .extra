#!/usr/bin/env bash
# Add custom commands

export DROPBOX_PATH="${DROPBOX_PATH:-/opt/Dropbox}"

# Load the .env files from repo
for file in "$HOME/.env"/*.env; do
  # For debugging
  # echo "Env file to load: $file"
	[ -r "$file" ] && [ -f "$file" ] && source "$file";
done;
unset file;

# Load the .env files from private path
for file in "${DROPBOX_PATH}/Dev/Private/envs"/*.env; do
  # For debugging
  # echo "Private env file to load: $file"
	[ -r "$file" ] && [ -f "$file" ] && source "$file";
done;
unset file;

export WALLPAPER="${DROPBOX_PATH}/backgrounds/927393-amazing-grain-wallpaper-2880x1800-ipad-pro.jpg"
export WALLPAPER_1="${DROPBOX_PATH}/backgrounds/1151480-gorgerous-fields-wallpaper-1920x1200-for-android-50.jpg"
export WALLPAPER_2="${DROPBOX_PATH}/backgrounds/1151409-fields-wallpaper-2560x1600-for-phones.jpg"
export BH_URL="http://localhost:8080"

function iterm2_print_user_vars() {
  local KUBE_CONTEXT="$(kubectl config current-context)"
  local KUBE_NAMESPACE="$(kubectl config get-contexts --no-headers | grep '*' | awk '{print $5}')"
  iterm2_set_user_var kbContext "${KUBE_CONTEXT}/${KUBE_NAMESPACE}"
}
